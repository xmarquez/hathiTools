<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Reads the page-level metadata of a single Hathi Trust Extracted Features file — get_hathi_page_meta • hathiTools</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Reads the page-level metadata of a single Hathi Trust Extracted Features file — get_hathi_page_meta"><meta property="og:description" content="Given a single Hathi Trust ID, this function returns a
tibble with its page-level metadata information. If the HT
EF file corresponding to this ID has not been downloaded already, it first
attempts to download it directly from the Hathi Trust server. This function
uses code authored by Ben Schmidt, from his Hathidy package
(https://github.com/HumanitiesDataAnalysis/hathidy)."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">hathiTools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/topic_models_using_hathi_ef.html">Topic Modeling using the Hathi Trust Extracted Features Files</a>
    </li>
    <li>
      <a href="../articles/using_the_hathi_bookworm.html">Using the Hathi Trust Bookworm Tool</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/xmarquez/hathiTools/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Reads the page-level metadata of a single Hathi Trust Extracted Features file</h1>
    <small class="dont-index">Source: <a href="https://github.com/xmarquez/hathiTools/blob/HEAD/R/hathi-ef-tools.R" class="external-link"><code>R/hathi-ef-tools.R</code></a></small>
    <div class="hidden name"><code>get_hathi_page_meta.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Given a single Hathi Trust ID, this function returns a
<a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a> with its page-level metadata information. If the HT
EF file corresponding to this ID has not been downloaded already, it first
attempts to download it directly from the Hathi Trust server. This function
uses code authored by Ben Schmidt, from his Hathidy package
(<a href="https://github.com/HumanitiesDataAnalysis/hathidy" class="external-link">https://github.com/HumanitiesDataAnalysis/hathidy</a>).</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">get_hathi_page_meta</span><span class="op">(</span></span>
<span>  <span class="va">htid</span>,</span>
<span>  dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"hathiTools.ef.dir"</span><span class="op">)</span>,</span>
<span>  cache_format <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"hathiTools.cacheformat"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>htid</dt>
<dd><p>The Hathi Trust id of the item whose metadata is to be read.</p></dd>


<dt>dir</dt>
<dd><p>The directory where the JSON file for the extracted features is
saved. Defaults to <code>getOption("hathiTools.ef.dir")</code>, which is just
"./hathi-ef/" on load. If the file does not exist, this function will first
attempt to download it.</p></dd>


<dt>cache_format</dt>
<dd><p>Format of metadata. The default is "rds"; can also
be "csv.gz", "csv", and "feather" (requires the arrow package).</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A <a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a> with the page-level metadata for the
corresponding Hathi Trust ID. The page-level metadata contains the
following fields (taken from
<a href="https://wiki.htrc.illinois.edu/pages/viewpage.action?pageId=79069329" class="external-link">https://wiki.htrc.illinois.edu/pages/viewpage.action?pageId=79069329</a>):</p>


<dl><dt>seq</dt>
<dd><p>The sequence number of the page in the volume. Corresponds to
the digital object, so that the first scan in the volume is "00000001",
which may be the cover, a title page, or something else.</p></dd>


<dt>Description</dt>
<dd><p>A hash of the page content used to compute the features
for the page. Volumes in HathiTrust may be updated to improve scan or OCR
quality or correct an issue, which would cause the text data to change,
and, if features are reprocessed, a new hash would result.</p></dd>


<dt>calculatedLanguage</dt>
<dd><p>The most probable language of the text on the
page. Determined algorithmically, and specified by language codes. Will be
<code>NA</code> if no language detected, or if the language was not recognized by the
algorithm.</p></dd>


<dt>tokenCount</dt>
<dd><p>The total number of tokens detected on the page.</p></dd>


<dt>lineCount</dt>
<dd><p>The total number of lines of text detected on the page.</p></dd>


<dt>emptyLineCount</dt>
<dd><p>The total number of empty lines on the page.</p></dd>


<dt>sentenceCount</dt>
<dd><p>The total number of sentences detected on the page.</p></dd>


<dt>section</dt>
<dd><p>The section of the page.</p></dd>


<dt>sectiontokenCount</dt>
<dd><p>The total number of tokens detected in the section
of the page.</p></dd>


<dt>sectionlineCount</dt>
<dd><p>The total number of lines detected in the section
of the page.</p></dd>


<dt>sectionemptyLineCount</dt>
<dd><p>The total number of empty lines detected in
the section of the page.</p></dd>


<dt>sectionsentenceCount</dt>
<dd><p>The total number of sentences detected in the
section of the page.</p></dd>


<dt>sectioncapAlphaSeq</dt>
<dd><p>The longest length of the alphabetical sequence
of capital characters starting a line. Only available for the "body"
section.</p></dd>


<dt>sectionBeginCharCount</dt>
<dd><p>A JSON-formatted character column with the
first non-White Space characters detected on lines in the section.</p></dd>


<dt>sectionEndCharCount</dt>
<dd><p>A JSON-formatted character column with the
last non-White Space characters detected on lines in the section.</p></dd>



</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>Note that if you want to extract the page-level metadata of more than one
Hathi Trust ID at a time, it may be best to download the JSON files for these
HTIDs first using <a href="rsync_from_hathi.html">rsync_from_hathi</a> and then running this function.</p>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Ben Schmidt</p>
<p>Xavier Marquez</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="co"># Download the 1862 version of "Democracy in America" by Tocqueville and get</span></span></span>
<span class="r-in"><span><span class="co"># its page-level metadata</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">tmp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">get_hathi_page_meta</span><span class="op">(</span><span class="st">"mdp.39015001796443"</span>, dir <span class="op">=</span> <span class="va">tmp</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 1,023 × 17</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    htid       page seq   version token…¹ lineC…² empty…³ sente…⁴ calcu…⁵ secti…⁶</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> mdp.3901…     4 0000… 6d5f66…       1       2       1      <span style="color: #BB0000;">NA</span> <span style="color: #BB0000;">NA</span>            1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> mdp.3901…     7 0000… 29c67b…      74      15       0      <span style="color: #BB0000;">NA</span> <span style="color: #BB0000;">NA</span>           74</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> mdp.3901…     8 0000… 4e3280…      49       8       0       2 en           49</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> mdp.3901…     9 0000… 0d4614…     189      24       0      10 en          189</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> mdp.3901…    10 0000… 6ad989…     274      32       0       8 en            7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> mdp.3901…    10 0000… 6ad989…     274      32       0       8 en          267</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> mdp.3901…    11 0000… 67d1c6…     287      33       0      10 en            6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> mdp.3901…    11 0000… 67d1c6…     287      33       0      10 en          281</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> mdp.3901…    12 0000… 8863d4…      80       9       0       4 en            7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> mdp.3901…    12 0000… 8863d4…      80       9       0       4 en           73</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># … with 1,013 more rows, 7 more variables: sectionLineCount &lt;int&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   sectionEmptyLineCount &lt;int&gt;, sectionSentenceCount &lt;int&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   sectionCapAlphaSeq &lt;int&gt;, sectionBeginCharCount &lt;chr&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   sectionEndCharCount &lt;chr&gt;, section &lt;chr&gt;, and abbreviated variable names</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   ¹​tokenCount, ²​lineCount, ³​emptyLineCount, ⁴​sentenceCount,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   ⁵​calculatedLanguage, ⁶​sectionTokenCount</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Xavier Marquez, Ben Schmidt.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

