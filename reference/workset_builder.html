<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Builds a Workset of Hathi Trust vol IDs by querying the Workset Builder 2.0 — workset_builder • hathiTools</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Builds a Workset of Hathi Trust vol IDs by querying the Workset Builder 2.0 — workset_builder"><meta property="og:description" content="Queries the SOLR endpoint of the Workset Builder 2.0 (beta) at
https://solr2.htrc.illinois.edu/solr-ef/. This API is experimental, and so
this function can fail at any time if the API changes."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">hathiTools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9001</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Builds a Workset of Hathi Trust vol IDs by querying the Workset Builder 2.0</h1>
    
    <div class="hidden name"><code>workset_builder.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Queries the SOLR endpoint of the Workset Builder 2.0 (beta) at
https://solr2.htrc.illinois.edu/solr-ef/. This API is experimental, and so
this function can fail at any time if the API changes.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">workset_builder</span><span class="op">(</span>
  <span class="va">token</span>,
  <span class="va">genre</span>,
  <span class="va">title</span>,
  <span class="va">name</span>,
  <span class="va">imprint</span>,
  <span class="va">pub_date</span>,
  lang <span class="op">=</span> <span class="st">"en"</span>,
  volumes_only <span class="op">=</span> <span class="cn">TRUE</span>,
  token_join <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AND"</span>, <span class="st">"OR"</span><span class="op">)</span>,
  genre_join <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AND"</span>, <span class="st">"OR"</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>token</dt>
<dd><p>The tokens to search for in the HathiTrust Extracted Features
files. Can be a vector of characters, e.g., <code>c("liberal", "democracy")</code>; if
a vector, the results are interpreted using the value of <code>token_join</code> -- by
default AND, so that the query will find all volumes where the tokens
appear in the same page, but not necessarily next to each other (in that
case, all pages containing both "liberal" and "democracy"). If <code>token_join</code>
is "OR" then the query will find all volumes where either of the tokens
appear. Search is case-insensitive; phrases can be included (e.g., "liberal
democracy"), and the database will then return matches that are separated
by hyphens (i.e., pages that contain the token "liberal-democracy").</p></dd>
<dt>genre</dt>
<dd><p>A genre string, e.g. "Fiction" or "Not Fiction" in the Hathi
Trust full metadata. Can be a set of genre strings, e.g.,
<code>c("dictionary","biography")</code>, which are interpreted using the value of
<code>genre_join</code> (by default "AND", so the metadata must contain both genre
strings; if "OR", the query will look for volumes that contain any of the
genre strings).</p></dd>
<dt>title</dt>
<dd><p>Title field. Multiple words will be joined with "AND"; can be a
phrase (e.g., "Democracy in America").</p></dd>
<dt>name</dt>
<dd><p>Names associated with the book (e.g., author). Multiple terms
will be joined with "AND"; can be a phrase (e.g., "Alexis de Tocqueville").</p></dd>
<dt>imprint</dt>
<dd><p>Imprint information (e.g., published). Multiple terms will be
joined with "AND"; can be a phrase (e.g., "University of Chicago Press").</p></dd>
<dt>pub_date</dt>
<dd><p>Publication date in Hathi Trust metadata. Can be a range,
e.g., <code>1800:1900</code>, or a set of years, e.g., <code>c(1800, 1805)</code>.</p></dd>
<dt>lang</dt>
<dd><p>Language. Default is "en" (english). Right now this function can
only search one language at a time; if you wish to search for terms in more
than one language, create multiple worksets and bind them together.</p></dd>
<dt>volumes_only</dt>
<dd><p>If <code>TRUE</code> (the default), returns only volume IDs plus a
count of the number of times the tokens appear in the volume; <code>FALSE</code>
returns both volume and page IDs where the tokens are found.</p></dd>
<dt>token_join</dt>
<dd><p>The logical connector for different tokens. Default is
"AND"; the query will ask for all pages where all tokens occur. "OR" means
the query will ask for all pages where any of the tokens occur.</p></dd>
<dt>genre_join</dt>
<dd><p>The logical connector for different genre strings. Default
is "AND"; the query will ask for all volumes containing all the selected
genre strings. "OR" means the query will ask for all volumes where any of
the genre strings occur.</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A tibble with volume_ids, number of occurrences of the terms in the
volume, and if <code>volumes_only</code> is <code>FALSE</code> a column for page ids.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in"><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">workset_builder</span><span class="op">(</span><span class="st">"democracy"</span>, genre <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"biography"</span>, <span class="st">"dictionary"</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"><span class="co"># Better to run two separate queries so the genres can be distinguished per</span></span>
<span class="r-in"><span class="co"># volume, but one can in principle use "OR" to find volumes that contain</span></span>
<span class="r-in"><span class="co"># "democracy" in either genre.</span></span>
<span class="r-in"><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">workset_builder</span><span class="op">(</span><span class="st">"democracy"</span>, genre <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"biography"</span>, <span class="st">"dictionary"</span><span class="op">)</span>,</span>
<span class="r-in">       genre_join <span class="op">=</span> <span class="st">"OR"</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># All volumes that mention "tylenol" and "paracetamol" in the same page</span></span>
<span class="r-in"><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">workset_builder</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"tylenol"</span>, <span class="st">"paracetamol"</span><span class="op">)</span>, volumes_only <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># All volumes mentioning "demagogue" published between 1800 and 1900</span></span>
<span class="r-in"><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">workset_builder</span><span class="op">(</span><span class="st">"demagogue"</span>, pub_date <span class="op">=</span> <span class="fl">1800</span><span class="op">:</span><span class="fl">1900</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># All volumes mentioning "demagogue" with "Tocqueville" and "Reeve"</span></span>
<span class="r-in"><span class="co"># in the author field</span></span>
<span class="r-in"><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">workset_builder</span><span class="op">(</span><span class="st">"demagogue"</span>, name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Tocqueville"</span>, <span class="st">"Reeve"</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># All volumes with "Tocqueville" in the author field</span></span>
<span class="r-in"><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">workset_builder</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Tocqueville"</span><span class="op">)</span></span>
<span class="r-in"><span class="op">}</span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Xavier Marquez.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

      </footer></div>

  


  

  </body></html>

