<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Get metadata for a set of Hathi Trust IDs — get_workset_meta • hathiTools</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Get metadata for a set of Hathi Trust IDs — get_workset_meta"><meta property="og:description" content="Queries the SOLR endpoint of the Workset Builder 2.0 (beta) at
https://solr2.htrc.illinois.edu/solr-ef/ to download volume metadata. This
API is experimental, and so this function can fail at any time if the API
changes."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">hathiTools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/example_workflow.html">An Example Workflow</a>
    </li>
    <li>
      <a href="../articles/topic_models_using_hathi_ef.html">Topic Modeling using the Hathi Trust Extracted Features Files</a>
    </li>
    <li>
      <a href="../articles/using_the_hathi_bookworm.html">Using the Hathi Trust Bookworm Tool</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/xmarquez/hathiTools/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Get metadata for a set of Hathi Trust IDs</h1>
    <small class="dont-index">Source: <a href="https://github.com/xmarquez/hathiTools/blob/HEAD/R/workset_builder.R" class="external-link"><code>R/workset_builder.R</code></a></small>
    <div class="hidden name"><code>get_workset_meta.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Queries the SOLR endpoint of the Workset Builder 2.0 (beta) at
https://solr2.htrc.illinois.edu/solr-ef/ to download volume metadata. This
API is experimental, and so this function can fail at any time if the API
changes.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">get_workset_meta</span><span class="op">(</span></span>
<span>  <span class="va">workset</span>,</span>
<span>  metadata_dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"hathiTools.metadata.dir"</span><span class="op">)</span>,</span>
<span>  cache <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>workset</dt>
<dd><p>A workset of htids, generated by <a href="workset_builder.html">workset_builder</a> from <a href="https://solr2.htrc.illinois.edu/solr-ef/" class="external-link">Hathi Trust's SOLR endpoint</a>. One can
also pass a data frame with a column labeled "htid" and containing valid
Hathi Trust htids, or a character vector of htids (though the function will
complain with a warning).</p></dd>


<dt>metadata_dir</dt>
<dd><p>The directory used to cache the metadata file. Defaults
to <code>getOption("hathiTools.metadata.dir")</code>, which is just "./metadata" on
loading the package.</p></dd>


<dt>cache</dt>
<dd><p>Whether to cache the resulting metadata as a CSV. Default is
TRUE. The name of the resulting metadata file is generated by appending an
MD5 hash (via <a href="https://rdrr.io/pkg/digest/man/digest.html" class="external-link">digest::digest</a>) to the string "metadata-", so each metadata
download will have a different name.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A <a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble::tibble</a> with the Hathi Trust metadata for all the volumes
in the workset or the vector of htids. #'   This tibble can contain the
following fields (taken from
<a href="https://wiki.htrc.illinois.edu/pages/viewpage.action?pageId=79069329" class="external-link">https://wiki.htrc.illinois.edu/pages/viewpage.action?pageId=79069329</a>):</p>


<dl><dt>htBibUrl</dt>
<dd><p>The Hathi Trust Bibliographic URL for the volume, which
will point to the volume in the HathiTrust Digital Library. E.g.
"http://catalog.hathitrust.org/api/volumes/full/htid/aeu.ark:/13960/t00z8277t.json"</p></dd>


<dt>schemaVersion</dt>
<dd><p>The schema version for the metadata block of the
Extracted Features file. A URL linking to the schema.
"https://schemas.hathitrust.org/Extracted
Features_Schema_MetadataSubSchema_v_3.0"</p></dd>


<dt>volumeIdentifier</dt>
<dd><p>The Hathi Trust ID</p></dd>


<dt>rightsAttributes</dt>
<dd><p>The copyright status of the volume.</p></dd>


<dt>title</dt>
<dd><p>The title of the volume.</p></dd>


<dt>genre</dt>
<dd><p>Information about the volume's genre, as determined by the
cataloger of the work. Values are derived from the Genre/Form Field in the
MARC record.</p></dd>


<dt>pubDate</dt>
<dd><p>The year in which that edition of the volume was first
published.</p></dd>


<dt>pubPlace</dt>
<dd><p>Named list column.  Information about where the volume was
first published. Includes id, type, and name. <code>type</code> is taken from the
Bibframe Instance's provisionActivity's place rdf:about node, which are
derived from the country codes in the MARC 008 field.</p></dd>


<dt>typeOfResource</dt>
<dd><p>Type of resource, e.g., "text".</p></dd>


<dt>bibliographicFormat</dt>
<dd><p>Bibliographic format (e.g. "BK").</p></dd>


<dt>language</dt>
<dd><p>The cataloger-determined language or languages of the
volume. Taken from the Bibframe Work's language's identifiedBy's value
node, which is derived from the Language Code field in the MARC record.
This may differ from the automatically detected language of any given page
in the page-level metadata returned by <a href="get_hathi_page_meta.html">get_hathi_page_meta</a></p></dd>


<dt>dateCreated</dt>
<dd><p>The date on which the metadata portion of the Extracted
Features file is generated, in YYYYMMDD format</p></dd>


<dt>lastUpdateDate</dt>
<dd><p>The most recent date the volume's copyright status
was updated.</p></dd>


<dt>imprint</dt>
<dd><p>Information about the publisher of the volume.</p></dd>


<dt>isbn</dt>
<dd><p>The ISBN of the volume (when a book).</p></dd>


<dt>issn</dt>
<dd><p>The ISSN of the volume (when a journal).</p></dd>


<dt>oclc</dt>
<dd><p>The OCLC number for the volume. An OCLC number is an identifier
assigned to items as they are cataloged in a library.</p></dd>


<dt>lccn</dt>
<dd><p>The Library of Congress Control Number for the volume. An LCCN
is a unique number that is assigned during cataloging.</p></dd>


<dt>classification</dt>
<dd><p>Library classification.</p></dd>


<dt>handleUrl</dt>
<dd><p>The Handle URL for the volume, which will point to the
volume in the HathiTrust Digital Library. E.g.
"http://hdl.handle.net/2027/mdp.39015062779023"</p></dd>


<dt>hathiTrustRecordNumber</dt>
<dd><p>The Hathi Trust Bibliographic record ID
number.</p></dd>


<dt>sourceInstitutionRecordNumber</dt>
<dd><p>The source institution record ID
number.</p></dd>


<dt>sourceInstitution</dt>
<dd><p>The source institution.</p></dd>


<dt>accessProfile</dt>
<dd><p>Type of access rights.</p></dd>


<dt>enumerationChronology</dt>
<dd><p>Information regarding which volume, issue,
and/or year the HathiTrust volume was published.</p></dd>


<dt>governmentDocument</dt>
<dd><p>Whether the item is a government document.</p></dd>


<dt>names</dt>
<dd><p>Contains information regarding the author(s), editor(s), or
other agents involved in creating the volume.</p></dd>


<dt>issuance</dt>
<dd><p>The cataloger-determined resource type of the volume (e.g.,
monographic, etc.).</p></dd>


<dt>subjectGenre, subjectName, subjectTitleInfo, subjectTemporal,
subjectGeographic, subjectOccupation, subjectCartographics</dt>
<dd><p>Columns
containing subject info, if present.</p></dd>



</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>Be mindful that downloading a large number of metadata records can take quite
some time. In practice I have found that downloading full metadata from more
than about 1000 records is a dicey proposition; if you need metadata for many
thousands of records, you are probably better off using the big hathifile
(see <a href="download_hathifile.html">download_hathifile</a> and <a href="load_raw_hathifile.html">load_raw_hathifile</a>).</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="va">dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">workset</span> <span class="op">&lt;-</span> <span class="fu"><a href="workset_builder.html">workset_builder</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Tocqueville"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">get_workset_meta</span><span class="op">(</span><span class="va">workset</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="op">]</span>, metadata_dir <span class="op">=</span> <span class="va">dir</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Getting download key...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Downloading metadata for 5 volumes. This might take some time.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 5 × 16</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   htid       acces…¹ acces…² url   title dateC…³ lastR…⁴ pubDate schem…⁵ typeO…⁶</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> mdp.39015… google  ic      http… Oeuv…  2.02<span style="color: #949494;">e</span>7  2.02<span style="color: #949494;">e</span>7    <span style="text-decoration: underline;">1</span>991 https:… http:/…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> mdp.39015… google  pd      http… De l…  2.02<span style="color: #949494;">e</span>7  2.02<span style="color: #949494;">e</span>7    <span style="text-decoration: underline;">1</span>836 https:… http:/…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> mdp.39015… google  ic      http… Demo…  2.02<span style="color: #949494;">e</span>7  2.02<span style="color: #949494;">e</span>7    <span style="text-decoration: underline;">2</span>004 https:… http:/…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> nyp.33433… google  pd      http… Demo…  2.02<span style="color: #949494;">e</span>7  2.02<span style="color: #949494;">e</span>7    <span style="text-decoration: underline;">1</span>847 https:… http:/…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> uva.x0004… google  pd      http… The …  2.02<span style="color: #949494;">e</span>7  2.02<span style="color: #949494;">e</span>7    <span style="text-decoration: underline;">1</span>849 https:… http:/…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># … with 6 more variables: language &lt;chr&gt;, oclc &lt;dbl&gt;, genre &lt;chr&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   contributor &lt;chr&gt;, publisher &lt;chr&gt;, pubPlace &lt;chr&gt;, and abbreviated</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   variable names ¹​accessProfile, ²​accessRights, ³​dateCreated,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   ⁴​lastRightsUpdateDate, ⁵​schemaVersion, ⁶​typeOfResource</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## We can also pass a vector of htids:</span></span></span>
<span class="r-in"><span><span class="fu">get_workset_meta</span><span class="op">(</span><span class="va">workset</span><span class="op">$</span><span class="va">htid</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span>, metadata_dir <span class="op">=</span> <span class="va">dir</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Metadata has already been downloaded. Returning cached metadata.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 5 × 16</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   htid       acces…¹ acces…² url   title dateC…³ lastR…⁴ pubDate schem…⁵ typeO…⁶</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> mdp.39015… google  ic      http… Oeuv…  2.02<span style="color: #949494;">e</span>7  2.02<span style="color: #949494;">e</span>7    <span style="text-decoration: underline;">1</span>991 https:… http:/…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> mdp.39015… google  pd      http… De l…  2.02<span style="color: #949494;">e</span>7  2.02<span style="color: #949494;">e</span>7    <span style="text-decoration: underline;">1</span>836 https:… http:/…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> mdp.39015… google  ic      http… Demo…  2.02<span style="color: #949494;">e</span>7  2.02<span style="color: #949494;">e</span>7    <span style="text-decoration: underline;">2</span>004 https:… http:/…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> nyp.33433… google  pd      http… Demo…  2.02<span style="color: #949494;">e</span>7  2.02<span style="color: #949494;">e</span>7    <span style="text-decoration: underline;">1</span>847 https:… http:/…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> uva.x0004… google  pd      http… The …  2.02<span style="color: #949494;">e</span>7  2.02<span style="color: #949494;">e</span>7    <span style="text-decoration: underline;">1</span>849 https:… http:/…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># … with 6 more variables: language &lt;chr&gt;, oclc &lt;dbl&gt;, genre &lt;chr&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   contributor &lt;chr&gt;, publisher &lt;chr&gt;, pubPlace &lt;chr&gt;, and abbreviated</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   variable names ¹​accessProfile, ²​accessRights, ³​dateCreated,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   ⁴​lastRightsUpdateDate, ⁵​schemaVersion, ⁶​typeOfResource</span></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Xavier Marquez, Ben Schmidt.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

